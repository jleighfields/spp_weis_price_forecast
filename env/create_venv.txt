uv venv --python 3.11
source .venv/bin/activate
python -V # check python version
uv init 

## install packages
uv add "torch<2.6" \
scikit-learn \
"darts==0.31.0" \
pandas polars pyarrow \
seaborn "plotly==5.24" \
python-dotenv \
"streamlit==1.38" \
"boto3==1.35.92" \
"duckdb==1.3.2" \
"ibis-framework[duckdb]==9.4.0" \
"mlflow==2.16.0" \
lightning lightning-sdk \
jupyterlab

pip install torch torchvision torchaudio

pip install scikit-learn darts neuralforecast \
pandas pyarrow seaborn plotly \
python-dotenv xgboost streamlit shiny \
jupyterlab jupyterlab-git ipywidgets \
pytest pylint rsconnect-python boto3

pip install polars duckdb "ibis-framework[duckdb]"
pip install mlflow
pip install optuna-integration[pytorch_lightning]
pip install lightning
pip install optuna-dashboard
pip install jupyterlab jupyterlab-optuna
pip install tensorboard
pip install papermill
pip install lightning-sdk

# don't do a pip freeze, it saves requirements that will cause deploying apps to fail
# since the systems are so different from training and hosting
# pip freeze > requirements.txt

jupyter kernelspec uninstall spp_weis -y
ipython kernel install --name=spp_weis --user

# restart gpu
alias gpu_reset="sudo rmmod nvidia_uvm ; sudo modprobe nvidia_uvm"
watch -n 1 nvidia-smi

# start tensorboard
tensorboard --reload_interval 3 --reload_multifile True --logdir=model_checkpoints/ts_mixer_model
tensorboard --reload_interval 3 --reload_multifile True --logdir=model_checkpoints/tide_model
tensorboard --reload_interval 3 --reload_multifile True --logdir=model_checkpoints/tft_model
